/**
 * EventEmitter
 * Author: Darlan Alves <darlan@moovia.com>
 * Built on 2014-01-21
 */

!function(a,b){function c(){}function d(a){var b=String(a).split(q);return b}function e(a){var b=this.$callbacks||(this.$callbacks={});return a?b[a]||(b[a]=[]):b}function f(a){var b=e(a.name);return delete a.name,b.push(a),a}function g(a,c,e,f){if(!a||!c||"function"!=typeof c)return[];for(var g,h,i=d(a),j=[];;){if(g=i.shift(),g===b)break;h={name:g,callback:c,context:e||null,params:f},j.push(h)}return j}function h(a){return a.length>3?p.call(a,3):!1}function i(a,c,d){for(var e,i=h(arguments),j=g(a,c,d,i);;){if(e=j.shift(),e===b)break;f(e)}return this}function j(a,c,d){for(var e,i=h(arguments),j=g(a,c,d,i);;){if(e=j.shift(),e===b)break;e.once=!0,f(e)}return this}function k(a){return this.$callbacks&&this.$callbacks[a]?delete this.$callbacks[a]:!1}function l(a,c,d){if(!c)return k(a);var f,g=e(a),h=0,i=g.length;for(d===b&&(d=null);i>h;h++)f=g[h],c!==f.callback||null!==d&&d!==f.context||g.splice(h,1);return!0}function m(a,c,e){if(!a&&!c)return delete this.$callbacks,this;for(var f,g=d(a),h=!0;;){if(f=g.shift(),f===b)break;h=h&&l(f,c,e)}return h}function n(a,b){var c,d,f=e(a),g=f.length,h=b.length,i=!0,j=0;if(0===g)return!0;for(;g>j&&(c=f[j],d=[],c.params!==!1&&(d=d.concat(c.params)),0!==h&&(d=d.concat(b)),c.once&&f.splice(j,1),i=c.callback.apply(c.context,d),i!==!1);j++);return i}function o(a){if(this.pauseEvents)return this;for(var c,e=d(a),f=!0,g=arguments.length>1?p.call(arguments,1):[];;){if(c=e.shift(),c===b)break;f=f&&n(c,g)}return!!f}var p=Array.prototype.slice,q=/\s+|,\s?/;c.prototype={constructor:c,pauseEvents:!1,getListeners:e,clearListeners:m,on:i,off:m,emit:o,once:j,suspendEvents:function(){return this.pauseEvents=!0,this},resumeEvents:function(){return this.pauseEvents=!1,this}},a.EventEmitter=c}("object"==typeof exports&&exports||this);