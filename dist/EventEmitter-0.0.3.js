/**
 * EventEmitter
 * Author: Darlan Alves <darlan@moovia.com>
 * Built on 2014-03-18
 */

!function(a,b){function c(a){var b=String(a).split(q);return b}function d(a){var b=this.$callbacks||(this.$callbacks={});return a?b[a]||(b[a]=[]):b}function e(a){var b=this.getEventListeners(a.name);return delete a.name,b.push(a),a}function f(a,d,e,f){if(!a||!d||"function"!=typeof d)return[];for(var g,h,i=c(a),j=[];;){if(g=i.shift(),g===b)break;h={name:g,callback:d,context:e||null,params:f},j.push(h)}return j}function g(a){return a.length>3?p.call(a,3):!1}function h(a,c,d){for(var e,h=g(arguments),i=f(a,c,d,h);;){if(e=i.shift(),e===b)break;this.addListenerToEvent(e)}return function(){this.removeListeners(a,c,d)}}function i(a,c,d){for(var e,h=g(arguments),i=f(a,c,d,h);;){if(e=i.shift(),e===b)break;e.once=!0,this.addListenerToEvent(e)}return function(){this.removeListeners(a,c,d)}}function j(a){return this.$callbacks&&this.$callbacks[a]?delete this.$callbacks[a]:!1}function k(a,c,d){if(!c)return this.removeAllListenersOfName(a);var e,f=this.getEventListeners(a),g=[],h=0,i=f.length;for(d===b&&(d=null);i>h;h++)e=f[h],(c!==e.callback||null!==d&&d!==e.context)&&g.push(f[h]);return this.$callbacks[a]=g,!0}function l(a,d,e){if(!a&&!d)return delete this.$callbacks,this;for(var f,g=c(a),h=!0;;){if(f=g.shift(),f===b)break;h=h&&this.removeListenersOfName(f,d,e)}return h}function m(a,b){var c,d,e=this.getEventListeners(a),f=e.length,g=b.length,h=!0,i=0;if(0===f)return!0;for(;f>i&&(c=e[i],d=[],c.params!==!1&&(d=d.concat(c.params)),0!==g&&(d=d.concat(b)),c.once&&e.splice(i,1),h=c.callback.apply(c.context,d),h!==!1);i++);return h}function n(a){if(this.pauseEvents)return this;for(var d,e=c(a),f=!0,g=arguments.length>1?p.call(arguments,1):[];;){if(d=e.shift(),d===b)break;f=f&&this.triggerEventsOfName(d,g)}return!!f}var o=function(){},p=Array.prototype.slice,q=/\s+|,\s?/;o.prototype={constructor:o,pauseEvents:!1,getListeners:d,clearListeners:l,on:h,off:l,emit:n,once:i,suspendEvents:function(){return this.pauseEvents=!0,this},resumeEvents:function(){return this.pauseEvents=!1,this},triggerEventsOfName:m,removeListenersOfName:k,removeAllListenersOfName:j,addListenerToEvent:e,getEventListeners:d},a.EventEmitter=o}("object"==typeof exports&&exports||this);